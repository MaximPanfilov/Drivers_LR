# Drivers_LR
For drivers course LR's
Лабораторная работа №1 Skull драйвер.

----[LAUNCH:]----
1. make

2. ./load_driver.sh

3. compile:
gcc -o p1 p1_writer_to_0_reader_from_2.c
gcc -o p2 p2_reader_from_0_writer_to_1.c  
gcc -o p3 p3_reader_from_1_writer_to_2.c
gcc -o p4 p4_monitor_all.c

4.
# Терминал 1
./p1

# Терминал 2  
./p2

# Терминал 3
./p3

# Терминал 4
./p4

----[QUIT:]----
ctrl + c 
OR 
pkill -f "p1"

./unload_driver.sh


----[TIPS:]----
LDD-3 page 74 quite usefull
sudo tail -f /var/log/syslog
cat /proc/devices

make
sudo insmod ./scull_ring.ko 
sudo rmmod scull_ring 
sudo lsmod //list of all modules
We can load and unload module this way too

ls -l in /dev directory will show higher and lower device number. The higher one must identificate driver, associated with device 
the lower one helps us to know which device is it
///////////////////////////////////////////////////////
Лабораторная работа №1 Scull-драйвер с блокировками
В рамках лабораторной работы необходимо разработать 2 (3 в некоторых вариантах) программы.
1.  Основная программа – Scull драйвер. Его задача выделять в режиме ядра область 
памяти и определять функции добавления и получения данных из данной области памяти. 
Правила хранения данных определяются вариантом. Для доступа к памяти применяются операции 
работы с драйвером (минимальный набор owner, open, release, read, write). В случае 
невозможности совершения операции (например, для задачи производителя-потребителя – чтение 
из пустого буфера) необходимо заблокировать пользовательский процесс, отправив его в очередь 
ожидания. Предусмотреть возможность запуска и работы с несколькими копиями драйвера с 
различными minor номерами.
2.  Программа по взаимодействию с драйвером и работающая в отдельном пользовательском процессе. 
Может быть написана на любом языке программирования. Позволяет вводить данные с 
клавиатуры/ считывать из файла и отправлять данные в драйвер. Также по заданию или 
выбору пользователя считывает данные из драйвера (возможно создание двух разных программ) 
и выводит их на экран.
--Вариант 9:--
В драйвере данные хранятся в кольцевом буфере.  В лабораторной работе необходимо создать 
три драйвера и четыре процесса. Первый процесс будет писать в первый драйвер 
поточно-генерируемую информацию, при этом считывать (извлекать) информацию из третьего 
драйвера. Второй процесс наоборот будет считывать данные из кольцевого буфера первого 
драйвера и записывать поточно-генерированные данные в кольцевой буфер второго драйвера. 
А третий считывать данные из второго драйвера и записывать в третий. Четвертый пользовательский 
процесс может выводить состояние буферов всех драйверов на экран.
///////////////////////////////////////////////////////
